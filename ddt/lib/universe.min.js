!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.universe=n()}}(function(){var n;return function e(n,t,r){function u(o,c){if(!t[o]){if(!n[o]){var f="function"==typeof require&&require;if(!c&&f)return f(o,!0);if(i)return i(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var s=t[o]={exports:{}};n[o][0].call(s.exports,function(e){var t=n[o][1][e];return u(t?t:e)},s,s.exports,e,n,t,r)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)u(r[o]);return u}({1:[function(n,e,t){function r(){s=!1,c.length?a=c.concat(a):l=-1,a.length&&u()}function u(){if(!s){var n=setTimeout(r);s=!0;for(var e=a.length;e;){for(c=a,a=[];++l<e;)c&&c[l].run();l=-1,e=a.length}c=null,s=!1,clearTimeout(n)}}function i(n,e){this.fun=n,this.array=e}function o(){}var c,f=e.exports={},a=[],s=!1,l=-1;f.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.push(new i(n,e)),1!==a.length||s||setTimeout(u,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=o,f.addListener=o,f.once=o,f.off=o,f.removeListener=o,f.removeAllListeners=o,f.emit=o,f.binding=function(n){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(n){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],2:[function(n,e,t){!function(n){function e(n){return n}function t(n,e,t){for(var r=0,u=e.length,i=t?JSON.parse(JSON.stringify(n)):new Array(u);u>r;++r)i[r]=n[e[r]];return i}function r(n){function e(e,t,r,u){for(;u>r;){var i=r+u>>>1;n(e[i])<t?r=i+1:u=i}return r}function t(e,t,r,u){for(;u>r;){var i=r+u>>>1;t<n(e[i])?u=i:r=i+1}return r}return t.right=t,t.left=e,t}function u(n){function e(n,e,t){for(var u=t-e,i=(u>>>1)+1;--i>0;)r(n,i,u,e);return n}function t(n,e,t){for(var u,i=t-e;--i>0;)u=n[e],n[e]=n[e+i],n[e+i]=u,r(n,1,i,e);return n}function r(e,t,r,u){for(var i,o=e[--u+t],c=n(o);(i=t<<1)<=r&&(r>i&&n(e[u+i])>n(e[u+i+1])&&i++,!(c<=n(e[u+i])));)e[u+t]=e[u+i],t=i;e[u+t]=o}return e.sort=t,e}function o(n){function e(e,r,u,i){var o,c,f,a,s=new Array(i=Math.min(u-r,i));for(c=0;i>c;++c)s[c]=e[r++];if(t(s,0,i),u>r){o=n(s[0]);do(f=n(a=e[r])>o)&&(s[0]=a,o=n(t(s,0,i)[0]));while(++r<u)}return s}var t=u(n);return e}function c(n){function e(e,t,r){for(var u=t+1;r>u;++u){for(var i=u,o=e[u],c=n(o);i>t&&n(e[i-1])>c;--i)e[i]=e[i-1];e[i]=o}return e}return e}function f(n){function e(n,e,u){return(T>u-e?r:t)(n,e,u)}function t(t,r,u){var i,o=(u-r)/6|0,c=r+o,f=u-1-o,a=r+u-1>>1,s=a-o,l=a+o,p=t[c],d=n(p),v=t[s],h=n(v),m=t[a],y=n(m),g=t[l],x=n(g),b=t[f],k=n(b);d>h&&(i=p,p=v,v=i,i=d,d=h,h=i),x>k&&(i=g,g=b,b=i,i=x,x=k,k=i),d>y&&(i=p,p=m,m=i,i=d,d=y,y=i),h>y&&(i=v,v=m,m=i,i=h,h=y,y=i),d>x&&(i=p,p=g,g=i,i=d,d=x,x=i),y>x&&(i=m,m=g,g=i,i=y,y=x,x=i),h>k&&(i=v,v=b,b=i,i=h,h=k,k=i),h>y&&(i=v,v=m,m=i,i=h,h=y,y=i),x>k&&(i=g,g=b,b=i,i=x,x=k,k=i);var w=v,A=h,j=g,O=x;t[c]=p,t[s]=t[r],t[a]=m,t[l]=t[u-1],t[f]=b;var E=r+1,L=u-2,S=O>=A&&A>=O;if(S)for(var R=E;L>=R;++R){var $=t[R],q=n($);if(A>q)R!==E&&(t[R]=t[E],t[E]=$),++E;else if(q>A)for(;;){var I=n(t[L]);{if(!(I>A)){if(A>I){t[R]=t[E],t[E++]=t[L],t[L--]=$;break}t[R]=t[L],t[L--]=$;break}L--}}}else for(var R=E;L>=R;R++){var $=t[R],q=n($);if(A>q)R!==E&&(t[R]=t[E],t[E]=$),++E;else if(q>O)for(;;){var I=n(t[L]);{if(!(I>O)){A>I?(t[R]=t[E],t[E++]=t[L],t[L--]=$):(t[R]=t[L],t[L--]=$);break}if(L--,R>L)break}}}if(t[r]=t[E-1],t[E-1]=w,t[u-1]=t[L+1],t[L+1]=j,e(t,r,E-1),e(t,L+2,u),S)return t;if(c>E&&L>f){for(var T,I;(T=n(t[E]))<=A&&T>=A;)++E;for(;(I=n(t[L]))<=O&&I>=O;)--L;for(var R=E;L>=R;R++){var $=t[R],q=n($);if(A>=q&&q>=A)R!==E&&(t[R]=t[E],t[E]=$),E++;else if(O>=q&&q>=O)for(;;){var I=n(t[L]);{if(!(O>=I&&I>=O)){A>I?(t[R]=t[E],t[E++]=t[L],t[L--]=$):(t[R]=t[L],t[L--]=$);break}if(L--,R>L)break}}}}return e(t,E,L+1)}var r=c(n);return e}function a(n){for(var e=new Array(n),t=-1;++t<n;)e[t]=0;return e}function s(n,e){for(var t=n.length;e>t;)n[t++]=0;return n}function p(n,e){if(e>32)throw new Error("invalid array width!");return n}function d(n){this.length=n,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=z(n)}function v(n,e){return function(t){var r=t.length;return[n.left(t,e,0,r),n.right(t,e,0,r)]}}function h(n,e){var t=e[0],r=e[1];return function(e){var u=e.length;return[n.left(e,t,0,u),n.left(e,r,0,u)]}}function m(n){return[0,n.length]}function y(){return null}function g(){return 0}function x(n){return n+1}function b(n){return n-1}function w(n){return function(e,t){return e+ +n(t)}}function A(n){return function(e,t){return e-n(t)}}function j(){function n(n){var e=T,t=n.length;return t&&(I=I.concat(n),$.lengthen(T+=t),N.forEach(function(r){r(n,e,t)}),R("dataAdded")),q}function r(){for(var n=O(T,T),e=[],t=0,r=0;T>t;++t)$.zero(t)?e.push(t):n[t]=r++;z.forEach(function(n){n(-1,-1,[],e,!0)}),C.forEach(function(e){e(n)});for(var t=0,r=0;T>t;++t)$.zero(t)||(t!==r&&($.copy(r,t),I[r]=I[t]),++r);I.length=T=r,$.truncate(r),R("dataRemoved")}function c(n,r){function c(e,u,o){if(r){for(yn=0,v=0,k=[],i=0;i<e.length;i++)for(v=0,k=n(e[i]);v<k.length;v++)yn++;nn=[],rn=E(e.length),on=O(yn,1),fn=[];var c=E(yn);for(l=0,i=0;i<e.length;i++)if(k=n(e[i]),k.length)for(rn[i]=k.length,v=0;v<k.length;v++)nn.push(k[v]),c[l]=i,l++;else rn[i]=0,fn.push(i);var f=ln(E(yn),0,yn);nn=t(nn,f),en=t(c,f)}else nn=e.map(n),en=ln(E(o),0,o),nn=t(nn,en);r&&(o=yn);var a=pn(nn),s=a[0],p=a[1];if(an)for(i=0;i<o;++i)an(nn[i],i)||($[G][en[i]+u]|=Q,r&&(on[i]=1));else{for(i=0;i<s;++i)$[G][en[i]+u]|=Q,r&&(on[i]=1);for(i=p;i<o;++i)$[G][en[i]+u]|=Q,r&&(on[i]=1)}if(!u)return H=nn,X=en,tn=rn,un=on,hn=s,void(mn=p);if(W=H,Z=X,cn=un,i0=0,i1=0,r&&(old_n0=u,u=W.length,o=yn),H=r?new Array(u+o):new Array(T),X=r?new Array(u+o):O(T,T),r&&(un=O(u+o,1)),r){var d=tn.length;tn=P(tn,T);for(var v=0;T>v+d;v++)tn[v+d]=rn[v]}for(i=0;i0<u&&i1<o;++i)W[i0]<nn[i1]?(H[i]=W[i0],r&&(un[i]=cn[i0]),X[i]=Z[i0++]):(H[i]=nn[i1],r&&(un[i]=cn[i1]),X[i]=en[i1++]+(r?old_n0:u));for(;i0<u;++i0,++i)H[i]=W[i0],r&&(un[i]=cn[i0]),X[i]=Z[i0];for(;i1<o;++i1,++i)H[i]=nn[i1],r&&(un[i]=cn[i1]),X[i]=en[i1]+(r?old_n0:u);a=pn(H),hn=a[0],mn=a[1]}function a(n,e,t){dn.forEach(function(n){n(nn,en,e,t)}),nn=en=null}function s(n){for(var e,t=0,r=0;T>t;++t)$.zero(e=X[t])||(t!==r&&(H[r]=H[t]),X[r]=n[e],++r);for(H.length=r;T>r;)X[r++]=0;var u=pn(H);hn=u[0],mn=u[1]}function p(n){var e=n[0],t=n[1];if(an)return an=null,D(function(n,r){return r>=e&&t>r},0===n[0]&&n[1]===X.length),hn=e,mn=t,sn;var u,i,o,c=[],f=[],a=[],s=[];if(hn>e)for(u=e,i=Math.min(hn,t);i>u;++u)c.push(X[u]),a.push(u);else if(e>hn)for(u=hn,i=Math.min(e,mn);i>u;++u)f.push(X[u]),s.push(u);if(t>mn)for(u=Math.max(e,mn),i=t;i>u;++u)c.push(X[u]),a.push(u);else if(mn>t)for(u=Math.max(hn,t),i=mn;i>u;++u)f.push(X[u]),s.push(u);if(r){var l=[],p=[];for(u=0;u<c.length;u++)tn[c[u]]++,un[a[u]]=0,1===tn[c[u]]&&($[G][c[u]]^=Q,l.push(c[u]));for(u=0;u<f.length;u++)tn[f[u]]--,un[s[u]]=1,0===tn[f[u]]&&($[G][f[u]]^=Q,p.push(f[u]));if(c=l,f=p,0===n[0]&&n[1]===X.length)for(u=0;u<fn.length;u++)$[G][o=fn[u]]&Q&&($[G][o]^=Q,c.push(o));else for(u=0;u<fn.length;u++)$[G][o=fn[u]]&Q||($[G][o]^=Q,f.push(o))}else{for(u=0;u<c.length;u++)$[G][c[u]]^=Q;for(u=0;u<f.length;u++)$[G][f[u]]^=Q}return hn=e,mn=t,z.forEach(function(n){n(Q,G,c,f)}),R("filtered"),sn}function d(n){return null==n?M():Array.isArray(n)?q(n):"function"==typeof n?U(n):j(n)}function j(n){return p((pn=v(S,n))(H))}function q(n){return p((pn=h(S,n))(H))}function M(){return p((pn=m)(H))}function U(n){return pn=m,D(an=n,!1),hn=0,mn=T,sn}function D(n,e){var t,u,i,o=[],c=[],f=[],a=[],s=X.length;if(!r)for(t=0;s>t;++t)!($[G][u=X[t]]&Q)^!!(i=n(H[t],t))&&(i?o.push(u):c.push(u));if(r)for(t=0;s>t;++t)n(H[t],t)?(o.push(X[t]),f.push(t)):(c.push(X[t]),a.push(t));if(r){var l=[],p=[];for(t=0;t<o.length;t++)1===un[f[t]]&&(tn[o[t]]++,un[f[t]]=0,1===tn[o[t]]&&($[G][o[t]]^=Q,l.push(o[t])));for(t=0;t<c.length;t++)0===un[a[t]]&&(tn[c[t]]--,un[a[t]]=1,0===tn[c[t]]&&($[G][c[t]]^=Q,p.push(c[t])));if(o=l,c=p,e)for(t=0;t<fn.length;t++)$[G][u=fn[t]]&Q&&($[G][u]^=Q,o.push(u));else for(t=0;t<fn.length;t++)$[G][u=fn[t]]&Q||($[G][u]^=Q,c.push(u))}else{for(t=0;t<o.length;t++)$[G][o[t]]&Q&&($[G][o[t]]&=Y);for(t=0;t<c.length;t++)$[G][c[t]]&Q||($[G][c[t]]|=Q)}z.forEach(function(n){n(Q,G,o,c)}),R("filtered")}function B(n){for(var e,t=[],u=mn;--u>=hn&&n>0;)$.zero(e=X[u])&&(t.push(I[e]),--n);if(r)for(u=0;u<fn.length&&n>0;u++)$.zero(e=fn[u])&&(t.push(I[e]),--n);return t}function K(n){var e,t,u=[];if(r)for(e=0;e<fn.length&&n>0;e++)$.zero(t=fn[e])&&(u.push(I[t]),--n);for(e=hn;mn>e&&n>0;)$.zero(t=X[e])&&(u.push(I[t]),--n),e++;return u}function V(n){function c(e,u,o,c){function f(){return r?void W++:void(++W===J&&(k=F(k,_<<=1),M=F(M,_),J=L(_)))}r&&(n0old=o,o=H.length-e.length,c=e.length);var d,v,h,m,g,x,b=N,k=r?[]:O(W,J),w=B,A=K,j=V,E=W,S=0,R=0;for(en&&(w=j=y),en&&(A=j=y),N=new Array(W),W=0,M=r?E>1?M:[]:E>1?P(M,T):O(T,J),E&&(h=(v=b[0]).key);c>R&&!((m=n(e[R]))>=m);)++R;for(;c>R;){for(v&&m>=h?(g=v,x=h,k[S]=W,(v=b[++S])&&(h=v.key)):(g={key:m,value:j()},x=m),N[W]=g;x>=m&&(d=u[R]+(r?n0old:o),r?M[d]?M[d].push(W):M[d]=[W]:M[d]=W,g.value=w(g.value,I[d],!0),$.zeroExcept(d,G,Y)||(g.value=A(g.value,I[d],!1)),!(++R>=c));)m=n(e[R]);f()}for(;E>S;)N[k[S]=W]=b[S++],f();if(r)for(i=0;i<M.length;i++)M[i]||(M[i]=[]);if(W>S)if(r)M=t(M,k,!0);else for(S=0;o>S;++S)M[S]=k[M[S]];d=z.indexOf(Z),W>1?(Z=a,nn=l):(!W&&tn&&(W=1,N=[{key:null,value:j()}]),1===W?(Z=s,nn=p):(Z=y,nn=y),M=null),z[d]=Z}function f(){if(W>1){for(var n=W,e=N,t=O(n,n),r=0,u=0;T>r;++r)$.zero(r)||(t[M[u]=M[r]]=1,++u);for(N=[],W=0,r=0;n>r;++r)t[r]&&(t[r]=W++,N.push(e[r]));if(W>1)for(var r=0;u>r;++r)M[r]=t[M[r]];else M=null;z[z.indexOf(Z)]=W>1?(nn=l,Z=a):1===W?(nn=p,Z=s):nn=Z=y}else if(1===W){if(tn)return;for(var r=0;T>r;++r)if(!$.zero(r))return;N=[],W=0,z[z.indexOf(Z)]=Z=nn=y}}function a(n,e,t,u,i){if(!(n===Q&&e===G||en)){var o,c,f,a,s;if(r){for(o=0,a=t.length;a>o;++o)if($.zeroExcept(f=t[o],G,Y))for(c=0;c<M[f].length;c++)s=N[M[f][c]],s.value=B(s.value,I[f],!1,c);for(o=0,a=u.length;a>o;++o)if($.onlyExcept(f=u[o],G,Y,e,n))for(c=0;c<M[f].length;c++)s=N[M[f][c]],s.value=K(s.value,I[f],i,c)}else{for(o=0,a=t.length;a>o;++o)$.zeroExcept(f=t[o],G,Y)&&(s=N[M[f]],s.value=B(s.value,I[f],!1));for(o=0,a=u.length;a>o;++o)$.onlyExcept(f=u[o],G,Y,e,n)&&(s=N[M[f]],s.value=K(s.value,I[f],i))}}}function s(n,e,t,r,u){if(!(n===Q&&e===G||en)){var i,o,c,f=N[0];for(i=0,c=t.length;c>i;++i)$.zeroExcept(o=t[i],G,Y)&&(f.value=B(f.value,I[o],!1));for(i=0,c=r.length;c>i;++i)$.onlyExcept(o=r[i],G,Y,e,n)&&(f.value=K(f.value,I[o],u))}}function l(){var n,e,t;for(n=0;W>n;++n)N[n].value=V();if(r){for(n=0;T>n;++n)for(e=0;e<M[n].length;e++)t=N[M[n][e]],t.value=B(t.value,I[n],!0,e);for(n=0;T>n;++n)if(!$.zeroExcept(n,G,Y))for(e=0;e<M[n].length;e++)t=N[M[n][e]],t.value=K(t.value,I[n],!1,e)}else{for(n=0;T>n;++n)t=N[M[n]],t.value=B(t.value,I[n],!0);for(n=0;T>n;++n)$.zeroExcept(n,G,Y)||(t=N[M[n]],t.value=K(t.value,I[n],!1))}}function p(){var n,e=N[0];for(e.value=V(),n=0;T>n;++n)e.value=B(e.value,I[n],!0);for(n=0;T>n;++n)$.zeroExcept(n,G,Y)||(e.value=K(e.value,I[n],!1))}function d(){return en&&(nn(),en=!1),N}function v(n){var e=U(d(),0,N.length,n);return D.sort(e,0,e.length)}function h(n,e,t){return B=n,K=e,V=t,en=!0,q}function m(){return h(x,b,g)}function k(n){return h(w(n),A(n),g)}function j(n){function e(e){return n(e.value)}return U=o(e),D=u(e),q}function E(){return j(e)}function S(){return W}function R(){var n=z.indexOf(Z);return n>=0&&z.splice(n,1),n=dn.indexOf(c),n>=0&&dn.splice(n,1),n=C.indexOf(f),n>=0&&C.splice(n,1),q}var q={top:v,all:d,reduce:h,reduceCount:m,reduceSum:k,order:j,orderNatural:E,size:S,dispose:R,remove:R};vn.push(q);var N,M,U,D,B,K,V,_=8,J=L(_),W=0,Z=y,nn=y,en=!0,tn=n===y;return arguments.length<1&&(n=e),z.push(Z),dn.push(c),C.push(f),c(H,X,0,T),m().orderNatural()}function _(){var n=V(y),e=n.all;return delete n.all,delete n.top,delete n.order,delete n.orderNatural,delete n.size,n.value=function(){return e()[0].value},n}function J(){vn.forEach(function(n){n.dispose()});var n=N.indexOf(c);return n>=0&&N.splice(n,1),n=N.indexOf(a),n>=0&&N.splice(n,1),n=C.indexOf(s),n>=0&&C.splice(n,1),$.masks[G]&=Y,M()}var Q,Y,G,H,X,W,Z,nn,en,tn,rn,un,on,cn,fn,an,sn={filter:d,filterExact:j,filterRange:q,filterFunction:U,filterAll:M,top:B,bottom:K,group:V,groupAll:_,dispose:J,remove:J},ln=f(function(n){return nn[n]}),pn=m,dn=[],vn=[],hn=0,mn=0,yn=0;N.unshift(c),N.push(a),C.push(s);var gn=$.add();return G=gn.offset,Q=gn.one,Y=~Q,c(I,0,T),a(I,0,T),sn}function a(){function n(n,e){var t;if(!d)for(t=e;T>t;++t)f=a(f,I[t],!0),$.zero(t)||(f=s(f,I[t],!1))}function e(n,e,t,r,u){var i,o,c;if(!d){for(i=0,c=t.length;c>i;++i)$.zero(o=t[i])&&(f=a(f,I[o],u));for(i=0,c=r.length;c>i;++i)$.only(o=r[i],e,n)&&(f=s(f,I[o],u))}}function t(){var n;for(f=l(),n=0;T>n;++n)f=a(f,I[n],!0),$.zero(n)||(f=s(f,I[n],!1))}function r(n,e,t){return a=n,s=e,l=t,d=!0,p}function u(){return r(x,b,g)}function i(n){return r(w(n),A(n),g)}function o(){return d&&(t(),d=!1),f}function c(){var t=z.indexOf(e);return t>=0&&z.splice(t),t=N.indexOf(n),t>=0&&N.splice(t),p}var f,a,s,l,p={reduce:r,reduceCount:u,reduceSum:i,value:o,dispose:c,remove:c},d=!0;return z.push(e),N.push(n),n(I,0,T),u()}function s(){return T}function p(){return I}function j(n){return"function"!=typeof n?void console.warn("onChange callback parameter must be a function!"):(M.push(n),function(){M.splice(M.indexOf(n),1)})}function R(n){for(var e=0;e<M.length;e++)M[e](n)}var $,q={add:n,remove:r,dimension:c,groupAll:a,size:s,all:p,onChange:j},I=[],T=0,z=[],N=[],C=[],M=[];return $=new d(0),arguments.length?n(arguments[0]):q}function O(n,e){return(257>e?z:65537>e?N:C)(n)}function E(n){for(var e=O(n,n),t=-1;++t<n;)e[t]=t;return e}function L(n){return 8===n?256:16===n?65536:4294967296}j.version="2.0.0-alpha.03",j.permute=t;var S=j.bisect=r(e);S.by=r;var R=j.heap=u(e);R.by=u;var $=j.heapselect=o(e);$.by=o;var q=j.insertionsort=c(e);q.by=c;var I=j.quicksort=f(e);I.by=f;var T=32,z=a,N=a,C=a,P=s,F=p;"undefined"!=typeof Uint8Array&&(z=function(n){return new Uint8Array(n)},N=function(n){return new Uint16Array(n)},C=function(n){return new Uint32Array(n)},P=function(n,e){if(n.length>=e)return n;var t=new n.constructor(e);return t.set(n),t},F=function(n,e){var t;switch(e){case 16:t=N(n.length);break;case 32:t=C(n.length);break;default:throw new Error("invalid array width!")}return t.set(n),t}),d.prototype.lengthen=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)this[e]=P(this[e],n);this.length=n},d.prototype.add=function(){var n,e,t,r,u;for(r=0,u=this.subarrays;u>r;++r)if(n=this.masks[r],e=this.width-32*r,t=~n&-~n,!(e>=32)||t)return 32>e&&t&1<<e&&(this[r]=F(this[r],e<<=1),this.width=32*r+e),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=z(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},d.prototype.copy=function(n,e){var t,r;for(t=0,r=this.subarrays;r>t;++t)this[t][n]=this[t][e]},d.prototype.truncate=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e){for(var r=this.length-1;r>=n;r--)this[e][r]=0;this[e].length=n}this.length=n},d.prototype.zero=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)if(this[e][n])return!1;return!0},d.prototype.zeroExcept=function(n,e,t){var r,u;for(r=0,u=this.subarrays;u>r;++r)if(r===e?this[r][n]&t:this[r][n])return!1;return!0},d.prototype.only=function(n,e,t){var r,u;for(r=0,u=this.subarrays;u>r;++r)if(this[r][n]!=(r===e?t:0))return!1;return!0},d.prototype.onlyExcept=function(n,e,t,r,u){var i,o,c;for(o=0,c=this.subarrays;c>o;++o)if(i=this[o][n],o===e&&(i&=t),i!=(o===r?u:0))return!1;return!0},n.crossfilter=j}("undefined"!=typeof t&&t||this)},{}],3:[function(n,e,t){e.exports=n("./crossfilter").crossfilter},{"./crossfilter":2}],4:[function(n,e,t){e.exports=function r(n,e){"use strict";var t,u,i=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,c=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,f=/^0x[0-9a-f]+$/i,a=/^0/,s=function(n){return r.insensitive&&(""+n).toLowerCase()||""+n},l=s(n).replace(o,"")||"",p=s(e).replace(o,"")||"",d=l.replace(i,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),v=p.replace(i,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),h=parseInt(l.match(f),16)||1!==d.length&&l.match(c)&&Date.parse(l),m=parseInt(p.match(f),16)||h&&p.match(c)&&Date.parse(p)||null;if(m){if(m>h)return-1;if(h>m)return 1}for(var y=0,g=Math.max(d.length,v.length);g>y;y++){if(t=!(d[y]||"").match(a)&&parseFloat(d[y])||d[y]||0,u=!(v[y]||"").match(a)&&parseFloat(v[y])||v[y]||0,isNaN(t)!==isNaN(u))return isNaN(t)?1:-1;if(typeof t!=typeof u&&(t+="",u+=""),u>t)return-1;if(t>u)return 1}return 0}},{}],5:[function(e,t,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof t)t.exports=e();else if("function"==typeof n&&n.amd)n(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var u="undefined"!=typeof window?window:self,i=u.Q;u.Q=e(),u.Q.noConflict=function(){return u.Q=i,this}}}(function(){"use strict";function n(n){return function(){return G.apply(n,arguments)}}function t(n){return n===Object(n)}function r(n){return"[object StopIteration]"===rn(n)||n instanceof _}function u(n,e){if(B&&e.stack&&"object"==typeof n&&null!==n&&n.stack&&-1===n.stack.indexOf(un)){for(var t=[],r=e;r;r=r.source)r.stack&&t.unshift(r.stack);t.unshift(n.stack);var u=t.join("\n"+un+"\n");n.stack=i(u)}}function i(n){for(var e=n.split("\n"),t=[],r=0;r<e.length;++r){var u=e[r];f(u)||o(u)||!u||t.push(u)}return t.join("\n")}function o(n){return-1!==n.indexOf("(module.js:")||-1!==n.indexOf("(node.js:")}function c(n){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(n);if(e)return[e[1],Number(e[2])];var t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(n);if(t)return[t[1],Number(t[2])];var r=/.*@(.+):(\d+)$/.exec(n);return r?[r[1],Number(r[2])]:void 0}function f(n){var e=c(n);if(!e)return!1;var t=e[0],r=e[1];return t===V&&r>=J&&sn>=r}function a(){if(B)try{throw new Error}catch(n){var e=n.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=c(t);if(!r)return;return V=r[0],r[1]}}function s(n,e,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+t+" instead.",new Error("").stack),n.apply(n,arguments)}}function l(n){return n instanceof h?n:x(n)?S(n):L(n)}function p(){function n(n){e=n,i.source=n,X(t,function(e,t){l.nextTick(function(){n.promiseDispatch.apply(n,t)})},void 0),t=void 0,r=void 0}var e,t=[],r=[],u=nn(p.prototype),i=nn(h.prototype);if(i.promiseDispatch=function(n,u,i){var o=H(arguments);t?(t.push(o),"when"===u&&i[1]&&r.push(i[1])):l.nextTick(function(){e.promiseDispatch.apply(e,o)})},i.valueOf=function(){if(t)return i;var n=y(e);return g(n)&&(e=n),n},i.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&B)try{throw new Error}catch(o){i.stack=o.stack.substring(o.stack.indexOf("\n")+1)}return u.promise=i,u.resolve=function(t){e||n(l(t))},u.fulfill=function(t){e||n(L(t))},u.reject=function(t){e||n(E(t))},u.notify=function(n){e||X(r,function(e,t){l.nextTick(function(){t(n)})},void 0)},u}function d(n){if("function"!=typeof n)throw new TypeError("resolver must be a function.");var e=p();try{n(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function v(n){return d(function(e,t){for(var r=0,u=n.length;u>r;r++)l(n[r]).then(e,t)})}function h(n,e,t){void 0===e&&(e=function(n){return E(new Error("Promise does not support operation: "+n))}),void 0===t&&(t=function(){return{state:"unknown"}});var r=nn(h.prototype);if(r.promiseDispatch=function(t,u,i){var o;try{o=n[u]?n[u].apply(r,i):e.call(r,u,i)}catch(c){o=E(c)}t&&t(o)},r.inspect=t,t){var u=t();"rejected"===u.state&&(r.exception=u.reason),r.valueOf=function(){var n=t();return"pending"===n.state||"rejected"===n.state?r:n.value}}return r}function m(n,e,t,r){return l(n).then(e,t,r)}function y(n){if(g(n)){var e=n.inspect();if("fulfilled"===e.state)return e.value}return n}function g(n){return n instanceof h}function x(n){return t(n)&&"function"==typeof n.then}function b(n){return g(n)&&"pending"===n.inspect().state}function k(n){return!g(n)||"fulfilled"===n.inspect().state}function w(n){return g(n)&&"rejected"===n.inspect().state}function A(){on.length=0,cn.length=0,an||(an=!0)}function j(n,t){an&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){-1!==W(cn,n)&&(e.emit("unhandledRejection",t,n),fn.push(n))}),cn.push(n),t&&"undefined"!=typeof t.stack?on.push(t.stack):on.push("(no stack) "+t))}function O(n){if(an){var t=W(cn,n);-1!==t&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){var r=W(fn,n);-1!==r&&(e.emit("rejectionHandled",on[t],n),fn.splice(r,1))}),cn.splice(t,1),on.splice(t,1))}}function E(n){var e=h({when:function(e){return e&&O(this),e?e(n):this}},function(){return this},function(){return{state:"rejected",reason:n}});return j(e,n),e}function L(n){return h({when:function(){return n},get:function(e){return n[e]},set:function(e,t){n[e]=t},"delete":function(e){delete n[e]},post:function(e,t){return null===e||void 0===e?n.apply(void 0,t):n[e].apply(n,t)},apply:function(e,t){return n.apply(e,t)},keys:function(){return tn(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function S(n){var e=p();return l.nextTick(function(){try{n.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function R(n){return h({isDef:function(){}},function(e,t){return N(n,e,t)},function(){return l(n).inspect()})}function $(n,e,t){return l(n).spread(e,t)}function q(n){return function(){function e(n,e){var o;if("undefined"==typeof StopIteration){try{o=t[n](e)}catch(c){return E(c)}return o.done?l(o.value):m(o.value,u,i)}try{o=t[n](e)}catch(c){return r(c)?l(c.value):E(c)}return m(o,u,i)}var t=n.apply(this,arguments),u=e.bind(e,"next"),i=e.bind(e,"throw");return u()}}function I(n){l.done(l.async(n)())}function T(n){throw new _(n)}function z(n){return function(){return $([this,C(arguments)],function(e,t){return n.apply(e,t)})}}function N(n,e,t){return l(n).dispatch(e,t)}function C(n){return m(n,function(n){var e=0,t=p();return X(n,function(r,u,i){var o;g(u)&&"fulfilled"===(o=u.inspect()).state?n[i]=o.value:(++e,m(u,function(r){n[i]=r,0===--e&&t.resolve(n)},t.reject,function(n){t.notify({index:i,value:n})}))},void 0),0===e&&t.resolve(n),t.promise})}function P(n){if(0===n.length)return l.resolve();var e=l.defer(),t=0;return X(n,function(r,u,i){function o(n){e.resolve(n)}function c(){t--,0===t&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function f(n){e.notify({index:i,value:n})}var a=n[i];t++,m(a,o,c,f)},void 0),e.promise}function F(n){return m(n,function(n){return n=Z(n,l),m(C(Z(n,function(n){return m(n,Q,Q)})),function(){return n})})}function M(n){return l(n).allSettled()}function U(n,e){return l(n).then(void 0,void 0,e)}function D(n,e){return l(n).nodeify(e)}var B=!1;try{throw new Error}catch(K){B=!!K.stack}var V,_,J=a(),Q=function(){},Y=function(){function n(){for(var n,e;r.next;)r=r.next,n=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),t(n,e);for(;f.length;)n=f.pop(),t(n);i=!1}function t(e,t){try{e()}catch(r){if(c)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}var r={task:void 0,next:null},u=r,i=!1,o=void 0,c=!1,f=[];if(Y=function(n){u=u.next={task:n,domain:c&&e.domain,next:null},i||(i=!0,o())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)c=!0,o=function(){e.nextTick(n)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=s,a.port1.onmessage=n,n()};var s=function(){a.port2.postMessage(0)};o=function(){setTimeout(n,0),s()}}else o=function(){setTimeout(n,0)};return Y.runAfter=function(n){f.push(n),i||(i=!0,o())},Y}(),G=Function.call,H=n(Array.prototype.slice),X=n(Array.prototype.reduce||function(n,e){var t=0,r=this.length;if(1===arguments.length)for(;;){if(t in this){e=this[t++];break}if(++t>=r)throw new TypeError}for(;r>t;t++)t in this&&(e=n(e,this[t],t));return e}),W=n(Array.prototype.indexOf||function(n){for(var e=0;e<this.length;e++)if(this[e]===n)return e;return-1}),Z=n(Array.prototype.map||function(n,e){var t=this,r=[];return X(t,function(u,i,o){r.push(n.call(e,i,o,t))},void 0),r}),nn=Object.create||function(n){function e(){}return e.prototype=n,new e},en=n(Object.prototype.hasOwnProperty),tn=Object.keys||function(n){var e=[];for(var t in n)en(n,t)&&e.push(t);return e},rn=n(Object.prototype.toString);_="undefined"!=typeof ReturnValue?ReturnValue:function(n){this.value=n};var un="From previous event:";l.resolve=l,l.nextTick=Y,l.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var n=this;return function(e,t){e?n.reject(e):arguments.length>2?n.resolve(H(arguments,1)):n.resolve(t)}},l.Promise=d,l.promise=d,d.race=v,d.all=C,d.reject=E,d.resolve=l,l.passByCopy=function(n){return n},h.prototype.passByCopy=function(){return this},l.join=function(n,e){return l(n).join(e)},h.prototype.join=function(n){return l([this,n]).spread(function(n,e){if(n===e)return n;throw new Error("Can't join: not the same: "+n+" "+e)})},l.race=v,h.prototype.race=function(){return this.then(l.race)},l.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(n,e,t){function r(e){try{return"function"==typeof n?n(e):e}catch(t){return E(t)}}function i(n){if("function"==typeof e){u(n,c);try{return e(n)}catch(t){return E(t)}}return E(n)}function o(n){return"function"==typeof t?t(n):n}var c=this,f=p(),a=!1;return l.nextTick(function(){c.promiseDispatch(function(n){a||(a=!0,f.resolve(r(n)))},"when",[function(n){a||(a=!0,f.resolve(i(n)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(n){var e,t=!1;try{e=o(n)}catch(r){if(t=!0,!l.onerror)throw r;l.onerror(r)}t||f.notify(e)}]),f.promise},l.tap=function(n,e){return l(n).tap(e)},h.prototype.tap=function(n){return n=l(n),this.then(function(e){return n.fcall(e).thenResolve(e)})},l.when=m,h.prototype.thenResolve=function(n){return this.then(function(){return n})},l.thenResolve=function(n,e){return l(n).thenResolve(e)},h.prototype.thenReject=function(n){return this.then(function(){throw n})},l.thenReject=function(n,e){return l(n).thenReject(e)},l.nearer=y,l.isPromise=g,l.isPromiseAlike=x,l.isPending=b,h.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=k,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var on=[],cn=[],fn=[],an=!0;l.resetUnhandledRejections=A,l.getUnhandledReasons=function(){return on.slice()},l.stopUnhandledRejectionTracking=function(){A(),an=!1},A(),l.reject=E,l.fulfill=L,l.master=R,l.spread=$,h.prototype.spread=function(n,e){return this.all().then(function(e){return n.apply(void 0,e)},e)},l.async=q,l.spawn=I,l["return"]=T,l.promised=z,l.dispatch=N,h.prototype.dispatch=function(n,e){var t=this,r=p();return l.nextTick(function(){t.promiseDispatch(r.resolve,n,e)}),r.promise},l.get=function(n,e){return l(n).dispatch("get",[e])},h.prototype.get=function(n){return this.dispatch("get",[n])},l.set=function(n,e,t){return l(n).dispatch("set",[e,t])},h.prototype.set=function(n,e){return this.dispatch("set",[n,e])},l.del=l["delete"]=function(n,e){return l(n).dispatch("delete",[e])},h.prototype.del=h.prototype["delete"]=function(n){return this.dispatch("delete",[n])},l.mapply=l.post=function(n,e,t){return l(n).dispatch("post",[e,t])},h.prototype.mapply=h.prototype.post=function(n,e){return this.dispatch("post",[n,e])},l.send=l.mcall=l.invoke=function(n,e){return l(n).dispatch("post",[e,H(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(n){return this.dispatch("post",[n,H(arguments,1)])},l.fapply=function(n,e){return l(n).dispatch("apply",[void 0,e])},h.prototype.fapply=function(n){return this.dispatch("apply",[void 0,n])},l["try"]=l.fcall=function(n){return l(n).dispatch("apply",[void 0,H(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,H(arguments)])},l.fbind=function(n){var e=l(n),t=H(arguments,1);return function(){return e.dispatch("apply",[this,t.concat(H(arguments))])}},h.prototype.fbind=function(){var n=this,e=H(arguments);return function(){return n.dispatch("apply",[this,e.concat(H(arguments))])}},l.keys=function(n){return l(n).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},l.all=C,h.prototype.all=function(){return C(this)},l.any=P,h.prototype.any=function(){return P(this)},l.allResolved=s(F,"allResolved","allSettled"),h.prototype.allResolved=function(){return F(this)},l.allSettled=M,h.prototype.allSettled=function(){return this.then(function(n){return C(Z(n,function(n){function e(){return n.inspect()}return n=l(n),n.then(e,e)}))})},l.fail=l["catch"]=function(n,e){return l(n).then(void 0,e)},h.prototype.fail=h.prototype["catch"]=function(n){return this.then(void 0,n)},l.progress=U,h.prototype.progress=function(n){return this.then(void 0,void 0,n)},l.fin=l["finally"]=function(n,e){return l(n)["finally"](e)},h.prototype.fin=h.prototype["finally"]=function(n){return n=l(n),this.then(function(e){return n.fcall().then(function(){return e})},function(e){return n.fcall().then(function(){throw e})})},l.done=function(n,e,t,r){return l(n).done(e,t,r)},h.prototype.done=function(n,t,r){var i=function(n){l.nextTick(function(){if(u(n,o),!l.onerror)throw n;l.onerror(n)})},o=n||t||r?this.then(n,t,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),o.then(void 0,i)},l.timeout=function(n,e,t){return l(n).timeout(e,t)},h.prototype.timeout=function(n,e){var t=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+n+" ms"),e.code="ETIMEDOUT"),t.reject(e)},n);return this.then(function(n){clearTimeout(r),t.resolve(n)},function(n){clearTimeout(r),t.reject(n)},t.notify),t.promise},l.delay=function(n,e){return void 0===e&&(e=n,n=void 0),l(n).delay(e)},h.prototype.delay=function(n){return this.then(function(e){var t=p();return setTimeout(function(){t.resolve(e)},n),t.promise})},l.nfapply=function(n,e){return l(n).nfapply(e)},h.prototype.nfapply=function(n){var e=p(),t=H(n);return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfcall=function(n){var e=H(arguments,1);return l(n).nfapply(e)},h.prototype.nfcall=function(){var n=H(arguments),e=p();return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(n){var e=H(arguments,1);return function(){var t=e.concat(H(arguments)),r=p();return t.push(r.makeNodeResolver()),l(n).fapply(t).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var n=H(arguments);return n.unshift(this),l.denodeify.apply(void 0,n)},l.nbind=function(n,e){var t=H(arguments,2);return function(){function r(){return n.apply(e,arguments)}var u=t.concat(H(arguments)),i=p();return u.push(i.makeNodeResolver()),l(r).fapply(u).fail(i.reject),i.promise}},h.prototype.nbind=function(){var n=H(arguments,0);return n.unshift(this),l.nbind.apply(void 0,n)},l.nmapply=l.npost=function(n,e,t){return l(n).npost(e,t)},h.prototype.nmapply=h.prototype.npost=function(n,e){var t=H(e||[]),r=p();
return t.push(r.makeNodeResolver()),this.dispatch("post",[n,t]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(n,e){var t=H(arguments,2),r=p();return t.push(r.makeNodeResolver()),l(n).dispatch("post",[e,t]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(n){var e=H(arguments,1),t=p();return e.push(t.makeNodeResolver()),this.dispatch("post",[n,e]).fail(t.reject),t.promise},l.nodeify=D,h.prototype.nodeify=function(n){return n?void this.then(function(e){l.nextTick(function(){n(null,e)})},function(e){l.nextTick(function(){n(e)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var sn=a();return l})}).call(this,e("_process"))},{_process:1}],6:[function(n,e,t){!function(n){function e(n){return n}function t(n,e){for(var t=0,r=e.length,u=new Array(r);r>t;++t)u[t]=n[e[t]];return u}function r(n){function e(e,t,r,u){for(;u>r;){var i=r+u>>>1;n(e[i])<t?r=i+1:u=i}return r}function t(e,t,r,u){for(;u>r;){var i=r+u>>>1;t<n(e[i])?u=i:r=i+1}return r}return t.right=t,t.left=e,t}function u(n){function e(n,e,t){for(var u=t-e,i=(u>>>1)+1;--i>0;)r(n,i,u,e);return n}function t(n,e,t){for(var u,i=t-e;--i>0;)u=n[e],n[e]=n[e+i],n[e+i]=u,r(n,1,i,e);return n}function r(e,t,r,u){for(var i,o=e[--u+t],c=n(o);(i=t<<1)<=r&&(r>i&&n(e[u+i])>n(e[u+i+1])&&i++,!(c<=n(e[u+i])));)e[u+t]=e[u+i],t=i;e[u+t]=o}return e.sort=t,e}function i(n){function e(e,r,u,i){var o,c,f,a,s=new Array(i=Math.min(u-r,i));for(c=0;i>c;++c)s[c]=e[r++];if(t(s,0,i),u>r){o=n(s[0]);do(f=n(a=e[r])>o)&&(s[0]=a,o=n(t(s,0,i)[0]));while(++r<u)}return s}var t=u(n);return e}function o(n){function e(e,t,r){for(var u=t+1;r>u;++u){for(var i=u,o=e[u],c=n(o);i>t&&n(e[i-1])>c;--i)e[i]=e[i-1];e[i]=o}return e}return e}function c(n){function e(n,e,u){return($>u-e?r:t)(n,e,u)}function t(t,r,u){var i,o=(u-r)/6|0,c=r+o,f=u-1-o,a=r+u-1>>1,s=a-o,l=a+o,p=t[c],d=n(p),v=t[s],h=n(v),m=t[a],y=n(m),g=t[l],x=n(g),b=t[f],k=n(b);d>h&&(i=p,p=v,v=i,i=d,d=h,h=i),x>k&&(i=g,g=b,b=i,i=x,x=k,k=i),d>y&&(i=p,p=m,m=i,i=d,d=y,y=i),h>y&&(i=v,v=m,m=i,i=h,h=y,y=i),d>x&&(i=p,p=g,g=i,i=d,d=x,x=i),y>x&&(i=m,m=g,g=i,i=y,y=x,x=i),h>k&&(i=v,v=b,b=i,i=h,h=k,k=i),h>y&&(i=v,v=m,m=i,i=h,h=y,y=i),x>k&&(i=g,g=b,b=i,i=x,x=k,k=i);var w=v,A=h,j=g,O=x;t[c]=p,t[s]=t[r],t[a]=m,t[l]=t[u-1],t[f]=b;var E=r+1,L=u-2,S=O>=A&&A>=O;if(S)for(var R=E;L>=R;++R){var $=t[R],q=n($);if(A>q)R!==E&&(t[R]=t[E],t[E]=$),++E;else if(q>A)for(;;){var I=n(t[L]);{if(!(I>A)){if(A>I){t[R]=t[E],t[E++]=t[L],t[L--]=$;break}t[R]=t[L],t[L--]=$;break}L--}}}else for(var R=E;L>=R;R++){var $=t[R],q=n($);if(A>q)R!==E&&(t[R]=t[E],t[E]=$),++E;else if(q>O)for(;;){var I=n(t[L]);{if(!(I>O)){A>I?(t[R]=t[E],t[E++]=t[L],t[L--]=$):(t[R]=t[L],t[L--]=$);break}if(L--,R>L)break}}}if(t[r]=t[E-1],t[E-1]=w,t[u-1]=t[L+1],t[L+1]=j,e(t,r,E-1),e(t,L+2,u),S)return t;if(c>E&&L>f){for(var T,I;(T=n(t[E]))<=A&&T>=A;)++E;for(;(I=n(t[L]))<=O&&I>=O;)--L;for(var R=E;L>=R;R++){var $=t[R],q=n($);if(A>=q&&q>=A)R!==E&&(t[R]=t[E],t[E]=$),E++;else if(O>=q&&q>=O)for(;;){var I=n(t[L]);{if(!(O>=I&&I>=O)){A>I?(t[R]=t[E],t[E++]=t[L],t[L--]=$):(t[R]=t[L],t[L--]=$);break}if(L--,R>L)break}}}}return e(t,E,L+1)}var r=o(n);return e}function f(n){for(var e=new Array(n),t=-1;++t<n;)e[t]=0;return e}function a(n,e){for(var t=n.length;e>t;)n[t++]=0;return n}function s(n,e){if(e>32)throw new Error("invalid array width!");return n}function l(n){this.length=n,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=q(n)}function p(n,e){return function(t){var r=t.length;return[n.left(t,e,0,r),n.right(t,e,0,r)]}}function d(n,e){var t=e[0],r=e[1];return function(e){var u=e.length;return[n.left(e,t,0,u),n.left(e,r,0,u)]}}function v(n){return[0,n.length]}function h(){return null}function m(){return 0}function y(n){return n+1}function g(n){return n-1}function x(n){return function(e,t){return e+ +n(t)}}function b(n){return function(e,t){return e-n(t)}}function k(){function n(n){var e=S,t=n.length;return t&&(L=L.concat(n),k.lengthen(S+=t),$.forEach(function(r){r(n,e,t)})),E}function r(){for(var n=w(S,S),e=[],t=0,r=0;S>t;++t)k.zero(t)?e.push(t):n[t]=r++;R.forEach(function(n){n(-1,-1,[],e,!0)}),q.forEach(function(e){e(n)});for(var t=0,r=0;S>t;++t)k.zero(t)||(t!==r&&(k.copy(r,t),L[r]=L[t]),++r);L.length=S=r,k.truncate(r)}function o(n){function r(e,r,u){Q=e.map(n),Y=X(A(u),0,u),Q=t(Q,Y);var i,o=W(Q),c=o[0],f=o[1];if(G)for(i=0;u>i;++i)G(Q[i],i)||(k[V][Y[i]+r]|=B);else{for(i=0;c>i;++i)k[V][Y[i]+r]|=B;for(i=f;u>i;++i)k[V][Y[i]+r]|=B}if(!r)return _=Q,J=Y,en=c,void(tn=f);var a=_,s=J,l=0,p=0;for(_=new Array(S),J=w(S,S),i=0;r>l&&u>p;++i)a[l]<Q[p]?(_[i]=a[l],J[i]=s[l++]):(_[i]=Q[p],J[i]=Y[p++]+r);for(;r>l;++l,++i)_[i]=a[l],J[i]=s[l];for(;u>p;++p,++i)_[i]=Q[p],J[i]=Y[p]+r;o=W(_),en=o[0],tn=o[1]}function o(n,e,t){Z.forEach(function(n){n(Q,Y,e,t)}),Q=Y=null}function f(n){for(var e,t=0,r=0;S>t;++t)k.zero(e=J[t])||(t!==r&&(_[r]=_[t]),J[r]=n[e],++r);for(_.length=r;S>r;)J[r++]=0;var u=W(_);en=u[0],tn=u[1]}function a(n){var e=n[0],t=n[1];if(G)return G=null,C(function(n,r){return r>=e&&t>r}),en=e,tn=t,H;var r,u,i,o=[],c=[];if(en>e)for(r=e,u=Math.min(en,t);u>r;++r)k[V][i=J[r]]^=B,o.push(i);else if(e>en)for(r=en,u=Math.min(e,tn);u>r;++r)k[V][i=J[r]]^=B,c.push(i);if(t>tn)for(r=Math.max(e,tn),u=t;u>r;++r)k[V][i=J[r]]^=B,o.push(i);else if(tn>t)for(r=Math.max(en,t),u=tn;u>r;++r)k[V][i=J[r]]^=B,c.push(i);return en=e,tn=t,R.forEach(function(n){n(B,V,o,c)}),H}function s(n){return null==n?I():Array.isArray(n)?E(n):"function"==typeof n?T(n):l(n)}function l(n){return a((W=p(O,n))(_))}function E(n){return a((W=d(O,n))(_))}function I(){return a((W=v)(_))}function T(n){return W=v,C(G=n),en=0,tn=S,H}function C(n){var e,t,r,u=[],i=[];for(e=0;S>e;++e)!(k[V][t=J[e]]&B)^!!(r=n(_[e],e))&&(r?(k[V][t]&=K,u.push(t)):(k[V][t]|=B,i.push(t)));R.forEach(function(n){n(B,V,u,i)})}function P(n){for(var e,t=[],r=tn;--r>=en&&n>0;)k.zero(e=J[r])&&(t.push(L[e]),--n);return t}function F(n){for(var e,t=[],r=en;tn>r&&n>0;)k.zero(e=J[r])&&(t.push(L[e]),--n),r++;return t}function M(n){function t(e,t,r,u){function i(){++G===Y&&(g=N(g,Q<<=1),C=N(C,Q),Y=j(Q))}var s,l,p,d,v,m,y=T,g=w(G,Y),x=M,b=U,A=D,O=G,E=0,$=0;for(W&&(x=A=h),W&&(b=A=h),T=new Array(G),G=0,C=O>1?z(C,S):w(S,Y),O&&(p=(l=y[0]).key);u>$&&!((d=n(e[$]))>=d);)++$;for(;u>$;){for(l&&d>=p?(v=l,m=p,g[E]=G,(l=y[++E])&&(p=l.key)):(v={key:d,value:A()},m=d),T[G]=v;!(d>m||(C[s=t[$]+r]=G,v.value=x(v.value,L[s],!0),k.zeroExcept(s,V,K)||(v.value=b(v.value,L[s],!1)),++$>=u));)d=n(e[$]);i()}for(;O>E;)T[g[E]=G]=y[E++],i();if(G>E)for(E=0;r>E;++E)C[E]=g[C[E]];s=R.indexOf(H),G>1?(H=o,X=f):(!G&&en&&(G=1,T=[{key:null,value:A()}]),1===G?(H=c,X=a):(H=h,X=h),C=null),R[s]=H}function r(){if(G>1){for(var n=G,e=T,t=w(n,n),r=0,u=0;S>r;++r)k.zero(r)||(t[C[u]=C[r]]=1,++u);for(T=[],G=0,r=0;n>r;++r)t[r]&&(t[r]=G++,T.push(e[r]));if(G>1)for(var r=0;u>r;++r)C[r]=t[C[r]];else C=null;R[R.indexOf(H)]=G>1?(X=f,H=o):1===G?(X=a,H=c):X=H=h}else if(1===G){if(en)return;for(var r=0;S>r;++r)if(!k.zero(r))return;T=[],G=0,R[R.indexOf(H)]=H=X=h}}function o(n,e,t,r,u){if(!(n===B&&e===V||W)){var i,o,c,f;for(i=0,c=t.length;c>i;++i)k.zeroExcept(o=t[i],V,K)&&(f=T[C[o]],f.value=M(f.value,L[o]));for(i=0,c=r.length;c>i;++i)k.onlyExcept(o=r[i],V,K,e,n)&&(f=T[C[o]],f.value=U(f.value,L[o],u))}}function c(n,e,t,r,u){if(!(n===B&&e===V||W)){var i,o,c,f=T[0];for(i=0,c=t.length;c>i;++i)k.zeroExcept(o=t[i],V,K)&&(f.value=M(f.value,L[o]));for(i=0,c=r.length;c>i;++i)k.onlyExcept(o=r[i],V,K,e,n)&&(f.value=U(f.value,L[o],u))}}function f(){var n,e;for(n=0;G>n;++n)T[n].value=D();for(n=0;S>n;++n)e=T[C[n]],e.value=M(e.value,L[n],!0);for(n=0;S>n;++n)k.zeroExcept(n,V,K)||(e=T[C[n]],e.value=U(e.value,L[n],!1))}function a(){var n,e=T[0];for(e.value=D(),n=0;S>n;++n)e.value=M(e.value,L[n],!0);for(n=0;S>n;++n)k.zeroExcept(n,V,K)||(e.value=U(e.value,L[n],!1))}function s(){return W&&(X(),W=!1),T}function l(n){var e=P(s(),0,T.length,n);return F.sort(e,0,e.length)}function p(n,e,t){return M=n,U=e,D=t,W=!0,I}function d(){return p(y,g,m)}function v(n){return p(x(n),b(n),m)}function A(n){function e(e){return n(e.value)}return P=i(e),F=u(e),I}function O(){return A(e)}function E(){return G}function $(){var n=R.indexOf(H);return n>=0&&R.splice(n,1),n=Z.indexOf(t),n>=0&&Z.splice(n,1),n=q.indexOf(r),n>=0&&q.splice(n,1),I}var I={top:l,all:s,reduce:p,reduceCount:d,reduceSum:v,order:A,orderNatural:O,size:E,dispose:$,remove:$};nn.push(I);var T,C,P,F,M,U,D,Q=8,Y=j(Q),G=0,H=h,X=h,W=!0,en=n===h;return arguments.length<1&&(n=e),R.push(H),Z.push(t),q.push(r),t(_,J,0,S),d().orderNatural()}function U(){var n=M(h),e=n.all;return delete n.all,delete n.top,delete n.order,delete n.orderNatural,delete n.size,n.value=function(){return e()[0].value},n}function D(){nn.forEach(function(n){n.dispose()});var n=$.indexOf(r);return n>=0&&$.splice(n,1),n=$.indexOf(o),n>=0&&$.splice(n,1),n=q.indexOf(f),n>=0&&q.splice(n,1),k.masks[V]&=K,I()}var B,K,V,_,J,Q,Y,G,H={filter:s,filterExact:l,filterRange:E,filterFunction:T,filterAll:I,top:P,bottom:F,group:M,groupAll:U,dispose:D,remove:D},X=c(function(n){return Q[n]}),W=v,Z=[],nn=[],en=0,tn=0;$.unshift(r),$.push(o),q.push(f);var rn=k.add();return V=rn.offset,B=rn.one,K=~B,r(L,0,S),o(L,0,S),H}function f(){function n(n,e){var t;if(!d)for(t=e;S>t;++t)f=a(f,L[t],!0),k.zero(t)||(f=s(f,L[t],!1))}function e(n,e,t,r,u){var i,o,c;if(!d){for(i=0,c=t.length;c>i;++i)k.zero(o=t[i])&&(f=a(f,L[o],u));for(i=0,c=r.length;c>i;++i)k.only(o=r[i],e,n)&&(f=s(f,L[o],u))}}function t(){var n;for(f=l(),n=0;S>n;++n)f=a(f,L[n],!0),k.zero(n)||(f=s(f,L[n],!1))}function r(n,e,t){return a=n,s=e,l=t,d=!0,p}function u(){return r(y,g,m)}function i(n){return r(x(n),b(n),m)}function o(){return d&&(t(),d=!1),f}function c(){var t=R.indexOf(e);return t>=0&&R.splice(t),t=$.indexOf(n),t>=0&&$.splice(t),p}var f,a,s,l,p={reduce:r,reduceCount:u,reduceSum:i,value:o,dispose:c,remove:c},d=!0;return R.push(e),$.push(n),n(L,0,S),u()}function a(){return S}function s(){return L}var k,E={add:n,remove:r,dimension:o,groupAll:f,size:a,all:s},L=[],S=0,R=[],$=[],q=[];return k=new l(0),arguments.length?n(arguments[0]):E}function w(n,e){return(257>e?q:65537>e?I:T)(n)}function A(n){for(var e=w(n,n),t=-1;++t<n;)e[t]=t;return e}function j(n){return 8===n?256:16===n?65536:4294967296}k.version="2.0.0-alpha.03",k.permute=t;var O=k.bisect=r(e);O.by=r;var E=k.heap=u(e);E.by=u;var L=k.heapselect=i(e);L.by=i;var S=k.insertionsort=o(e);S.by=o;var R=k.quicksort=c(e);R.by=c;var $=32,q=f,I=f,T=f,z=a,N=s;"undefined"!=typeof Uint8Array&&(q=function(n){return new Uint8Array(n)},I=function(n){return new Uint16Array(n)},T=function(n){return new Uint32Array(n)},z=function(n,e){if(n.length>=e)return n;var t=new n.constructor(e);return t.set(n),t},N=function(n,e){var t;switch(e){case 16:t=I(n.length);break;case 32:t=T(n.length);break;default:throw new Error("invalid array width!")}return t.set(n),t}),l.prototype.lengthen=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)this[e]=z(this[e],n);this.length=n},l.prototype.add=function(){var n,e,t,r,u;for(r=0,u=this.subarrays;u>r;++r)if(n=this.masks[r],e=this.width-32*r,t=~n&-~n,!(e>=32)||t)return 32>e&&t&1<<e&&(this[r]=N(this[r],e<<=1),this.width=32*r+e),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=q(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},l.prototype.copy=function(n,e){var t,r;for(t=0,r=this.subarrays;r>t;++t)this[t][n]=this[t][e]},l.prototype.truncate=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e){for(var r=this.length-1;r>=n;r--)this[e][r]=0;this[e].length=n}this.length=n},l.prototype.zero=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)if(this[e][n])return!1;return!0},l.prototype.zeroExcept=function(n,e,t){var r,u;for(r=0,u=this.subarrays;u>r;++r)if(r===e?this[r][n]&t:this[r][n])return!1;return!0},l.prototype.only=function(n,e,t){var r,u;for(r=0,u=this.subarrays;u>r;++r)if(this[r][n]!=(r===e?t:0))return!1;return!0},l.prototype.onlyExcept=function(n,e,t,r,u){var i,o,c;for(o=0,c=this.subarrays;c>o;++o)if(i=this[o][n],o===e&&(i&=t),i!=(o===r?u:0))return!1;return!0},n.crossfilter=k}("undefined"!=typeof t&&t||this)},{}],7:[function(n,e,t){arguments[4][3][0].apply(t,arguments)},{"./crossfilter":6,dup:3}],8:[function(n,e,t){function r(n,e){function t(n){if("string"==typeof n){var e=n,t=function(n){return n[e]};return t}return n}function i(n){if("string"==typeof n){var e=n,t=function(n){return+n[e]};return t}return n}n.count=function(t){return arguments.length?(e.count=t,n):e.count},n.sum=function(t){return arguments.length?(t=i(t),e.sum=t,n):e.sum},n.avg=function(t){return arguments.length?(t=i(t),"function"==typeof t?(e.sum&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),e.sum=t,e.avg=!0,e.count=!0):e.avg=t,n):e.avg},n.exception=function(r){return arguments.length?(r=t(r),e.exceptionAccessor=r,n):e.exceptionAccessor},n.filter=function(t){return arguments.length?(e.filter=t,n):e.filter},n.valueList=function(r){return arguments.length?(r=t(r),e.valueList=r,n):e.valueList},n.median=function(t){return arguments.length?(t=i(t),"function"==typeof t&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=t),e.median=t,n):e.median},n.min=function(t){return arguments.length?(t=i(t),"function"==typeof t&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=t),e.min=t,n):e.min},n.max=function(t){return arguments.length?(t=i(t),"function"==typeof t&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=t),e.max=t,n):e.max},n.exceptionCount=function(r){return arguments.length?(r=t(r),"function"==typeof r?(e.sum&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),e.exceptionAccessor=r,e.exceptionCount=!0):e.exceptionCount=r,n):e.exceptionCount},n.exceptionSum=function(t){return arguments.length?(t=i(t),e.exceptionSum=t,n):e.exceptionSum},n.histogramValue=function(t){return arguments.length?(t=i(t),e.histogramValue=t,n):e.histogramValue},n.histogramBins=function(t){return arguments.length?(e.histogramThresholds=t,n):e.histogramThresholds},n.std=function(t){return arguments.length?(t=i(t),"function"==typeof t?(e.sumOfSquares=t,e.sum=t,e.count=!0,e.std=!0):e.std=t,n):e.std},n.sumOfSq=function(t){return arguments.length?(t=i(t),e.sumOfSquares=t,n):e.sumOfSquares},n.value=function(n,t){return arguments.length&&"string"==typeof n?(e.values||(e.values={}),e.values[n]={},e.values[n].parameters=u(),r(e.values[n],e.values[n].parameters),t&&(e.values[n].accessor=t),e.values[n]):void console.error("'value' requires a string argument.")},n.nest=function(r){return arguments.length?(r.map(t),e.nestKeys=r,n):e.nestKeys},n.alias=function(t){return arguments.length?(e.aliasKeys=t,n):e.aliasKeys},n.aliasProp=function(t){return arguments.length?(e.aliasPropKeys=t,n):e.aliasPropKeys},n.groupAll=function(t){return arguments.length?(e.groupAll=t,n):e.groupAll},n.dataList=function(t){return arguments.length?(e.dataList=t,n):e.dataList}}var u=n("./parameters.js"),i={build:r};e.exports=i},{"./parameters.js":24}],9:[function(n,e,t){var r={initial:function(n,e,t){return function(r){n&&(r=n(r));for(var u in t)e(r)[u]=function(){return t[u](e(r))};return r}}};e.exports=r},{}],10:[function(n,e,t){var r={add:function(n,e,t){return function(r,u,i){e&&e(r,u,i);for(var o in n)t(r)[o]=n[o](t(r),u);return r}}};e.exports=r},{}],11:[function(n,e,t){var r={add:function(n,e,t){return function(n,r,u){return e&&e(n,r,u),t(n).count>0?t(n).avg=t(n).sum/t(n).count:t(n).avg=0,n}},remove:function(n,e,t){return function(n,r,u){return e&&e(n,r,u),t(n).count>0?t(n).avg=t(n).sum/t(n).count:t(n).avg=0,n}},initial:function(n,e){return function(t){return t=n(t),e(t).avg=0,t}}};e.exports=r},{}],12:[function(n,e,t){function r(n,e,t){t||(t=function(n){return n});var w={reduceAdd:e.reduceAdd,reduceRemove:e.reduceRemove,reduceInitial:e.reduceInitial};(n.count||n.std)&&(e.reduceAdd=i.add(e.reduceAdd,t),e.reduceRemove=i.remove(e.reduceRemove,t),e.reduceInitial=i.initial(e.reduceInitial,t)),n.sum&&(e.reduceAdd=o.add(n.sum,e.reduceAdd,t),e.reduceRemove=o.remove(n.sum,e.reduceRemove,t),e.reduceInitial=o.initial(e.reduceInitial,t)),n.avg&&(n.count&&n.sum?(e.reduceAdd=c.add(n.sum,e.reduceAdd,t),e.reduceRemove=c.remove(n.sum,e.reduceRemove,t),e.reduceInitial=c.initial(e.reduceInitial,t)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),n.exceptionCount&&(n.exceptionAccessor?(e.reduceAdd=d.add(n.exceptionAccessor,e.reduceAdd,t),e.reduceRemove=d.remove(n.exceptionAccessor,e.reduceRemove,t),e.reduceInitial=d.initial(e.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),n.exceptionSum&&(n.exceptionAccessor?(e.reduceAdd=v.add(n.exceptionAccessor,n.exceptionSum,e.reduceAdd,t),e.reduceRemove=v.remove(n.exceptionAccessor,n.exceptionSum,e.reduceRemove,t),e.reduceInitial=v.initial(e.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(n.valueList||n.median||n.min||n.max)&&(e.reduceAdd=p.add(n.valueList,e.reduceAdd,t),e.reduceRemove=p.remove(n.valueList,e.reduceRemove,t),e.reduceInitial=p.initial(e.reduceInitial,t)),n.dataList&&(e.reduceAdd=k.add(n.dataList,e.reduceAdd,t),e.reduceRemove=k.remove(n.dataList,e.reduceRemove,t),e.reduceInitial=k.initial(e.reduceInitial,t)),n.median&&(e.reduceAdd=f.add(e.reduceAdd,t),e.reduceRemove=f.remove(e.reduceRemove,t),e.reduceInitial=f.initial(e.reduceInitial,t)),n.min&&(e.reduceAdd=a.add(e.reduceAdd,t),e.reduceRemove=a.remove(e.reduceRemove,t),e.reduceInitial=a.initial(e.reduceInitial,t)),n.max&&(e.reduceAdd=s.add(e.reduceAdd,t),e.reduceRemove=s.remove(e.reduceRemove,t),e.reduceInitial=s.initial(e.reduceInitial,t)),n.exceptionAccessor&&(e.reduceAdd=l.add(n.exceptionAccessor,e.reduceAdd,t),e.reduceRemove=l.remove(n.exceptionAccessor,e.reduceRemove,t),e.reduceInitial=l.initial(e.reduceInitial,t)),n.histogramValue&&n.histogramThresholds&&(e.reduceAdd=h.add(n.histogramValue,e.reduceAdd,t),e.reduceRemove=h.remove(n.histogramValue,e.reduceRemove,t),e.reduceInitial=h.initial(n.histogramThresholds,e.reduceInitial,t)),n.sumOfSquares&&(e.reduceAdd=m.add(n.sumOfSquares,e.reduceAdd,t),e.reduceRemove=m.remove(n.sumOfSquares,e.reduceRemove,t),e.reduceInitial=m.initial(e.reduceInitial,t)),n.std&&(n.sumOfSquares&&n.sum?(e.reduceAdd=y.add(e.reduceAdd,t),e.reduceRemove=y.remove(e.reduceRemove,t),e.reduceInitial=y.initial(e.reduceInitial,t)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),n.nestKeys&&(e.reduceAdd=g.add(n.nestKeys,e.reduceAdd,t),e.reduceRemove=g.remove(n.nestKeys,e.reduceRemove,t),e.reduceInitial=g.initial(e.reduceInitial,t)),n.aliasKeys&&(e.reduceInitial=x.initial(e.reduceInitial,t,n.aliasKeys)),n.aliasPropKeys&&(e.reduceAdd=b.add(n.aliasPropKeys,e.reduceAdd,t),e.reduceRemove=b.add(n.aliasPropKeys,e.reduceRemove,t)),n.filter&&(e.reduceAdd=u.add(n.filter,e.reduceAdd,w.reduceAdd,t),e.reduceRemove=u.remove(n.filter,e.reduceRemove,w.reduceRemove,t)),n.values&&Object.getOwnPropertyNames(n.values).forEach(function(u){var i=function(n){return function(e){return e=n(e),t(e)[u]={},e}};e.reduceInitial=i(e.reduceInitial),r(n.values[u].parameters,e,function(n){return n[u]})})}var u=n("./filter.js"),i=n("./count.js"),o=n("./sum.js"),c=n("./avg.js"),f=n("./median.js"),a=n("./min.js"),s=n("./max.js"),l=n("./value-count.js"),p=n("./value-list.js"),d=n("./exception-count.js"),v=n("./exception-sum.js"),h=n("./histogram.js"),m=n("./sum-of-squares.js"),y=n("./std.js"),g=n("./nest.js"),x=n("./alias.js"),b=n("./aliasProp.js"),k=n("./data-list.js"),w={build:r};e.exports=w},{"./alias.js":9,"./aliasProp.js":10,"./avg.js":11,"./count.js":14,"./data-list.js":15,"./exception-count.js":16,"./exception-sum.js":17,"./filter.js":18,"./histogram.js":19,"./max.js":20,"./median.js":21,"./min.js":22,"./nest.js":23,"./std.js":29,"./sum-of-squares.js":30,"./sum.js":31,"./value-count.js":32,"./value-list.js":33}],13:[function(n,e,t){var r=function(n){return function(e){return e[n]}};_grouper=function(n,e){return n||(n=function(n){return n}),function(t,r){e&&e(t,r);var u=n(t),i=n(r);return"undefined"!=typeof i.count&&(u.count+=i.count),"undefined"!=typeof i.sum&&(u.sum+=i.sum),"undefined"!=typeof i.avg&&(u.avg=u.sum/u.count),t}},reductio_cap=function(n,e,t){var u=(e.reduceInitial(),t.values?Object.keys(t.values):[]),i=_grouper();if(u.length)for(var o=0;o<u.length;++o)i=_grouper(r(u[o]),i);return function(t,r){if(!arguments.length)return n();if(t===1/0||!t)return n();var u=n(),o=t-1;if(u.length<=t)return u;var c=u.slice(0,o),f={key:r||"Others"};f.value=e.reduceInitial();for(var a=o;a<u.length;++a)i(f.value,u[a].value);return c.push(f),c}},e.exports=reductio_cap},{}],14:[function(n,e,t){var r={add:function(n,e){return function(t,r,u){return n&&n(t,r,u),e(t).count++,t}},remove:function(n,e){return function(t,r,u){return n&&n(t,r,u),e(t).count--,t}},initial:function(n,e){return function(t){return n&&(t=n(t)),e(t).count=0,t}}};e.exports=r},{}],15:[function(n,e,t){var r={add:function(n,e,t){return function(n,r,u){return e&&e(n,r,u),t(n).dataList.push(r),n}},remove:function(n,e,t){return function(n,r,u){return e&&e(n,r,u),t(n).dataList.splice(t(n).dataList.indexOf(r),1),n}},initial:function(n,e){return function(t){return n&&(t=n(t)),e(t).dataList=[],t}}};e.exports=r},{}],16:[function(n,e,t){var r={add:function(n,e,t){var r,u;return function(i,o,c){return e&&e(i,o,c),r=t(i).bisect(t(i).values,n(o),0,t(i).values.length),u=t(i).values[r],u&&u[0]===n(o)&&0!==u[1]||t(i).exceptionCount++,i}},remove:function(n,e,t){var r,u;return function(i,o,c){return e&&e(i,o,c),r=t(i).bisect(t(i).values,n(o),0,t(i).values.length),u=t(i).values[r],u&&u[0]===n(o)&&1===u[1]&&t(i).exceptionCount--,i}},initial:function(n,e){return function(t){return t=n(t),e(t).exceptionCount=0,t}}};e.exports=r},{}],17:[function(n,e,t){var r={add:function(n,e,t,r){var u,i;return function(o,c,f){return t&&t(o,c,f),u=r(o).bisect(r(o).values,n(c),0,r(o).values.length),i=r(o).values[u],i&&i[0]===n(c)&&0!==i[1]||(r(o).exceptionSum=r(o).exceptionSum+e(c)),o}},remove:function(n,e,t,r){var u,i;return function(o,c,f){return t&&t(o,c,f),u=r(o).bisect(r(o).values,n(c),0,r(o).values.length),i=r(o).values[u],i&&i[0]===n(c)&&1===i[1]&&(r(o).exceptionSum=r(o).exceptionSum-e(c)),o}},initial:function(n,e){return function(t){return t=n(t),e(t).exceptionSum=0,t}}};e.exports=r},{}],18:[function(n,e,t){var r={add:function(n,e,t){return function(r,u,i){return n(u,i)?e&&e(r,u,i):t&&t(r,u,i),r}},remove:function(n,e,t){return function(r,u,i){return n(u,i)?e&&e(r,u,i):t&&t(r,u,i),r}}};e.exports=r},{}],19:[function(n,e,t){var r=n("crossfilter"),u={add:function(n,e,t){var u,i=r.bisect.by(function(n){return n}).left,o=r.bisect.by(function(n){return n.x}).right;return function(r,c,f){return e&&e(r,c,f),u=t(r).histogram[o(t(r).histogram,n(c),0,t(r).histogram.length)-1],u.y++,u.splice(i(u,n(c),0,u.length),0,n(c)),r}},remove:function(n,e,t){var u,i=r.bisect.by(function(n){return n}).left,o=r.bisect.by(function(n){return n.x}).right;return function(r,c,f){return e&&e(r,c,f),u=t(r).histogram[o(t(r).histogram,n(c),0,t(r).histogram.length)-1],u.y--,u.splice(i(u,n(c),0,u.length),1),r}},initial:function(n,e,t){return function(r){r=e(r),t(r).histogram=[];for(var u=[],i=1;i<n.length;i++)u=[],u.x=n[i-1],u.dx=n[i]-n[i-1],u.y=0,t(r).histogram.push(u);return r}}};e.exports=u},{crossfilter:7}],20:[function(n,e,t){var r={add:function(n,e){return function(t,r,u){return n&&n(t,r,u),e(t).max=e(t).valueList[e(t).valueList.length-1],t}},remove:function(n,e){return function(t,r,u){return n&&n(t,r,u),0===e(t).valueList.length?(e(t).max=void 0,t):(e(t).max=e(t).valueList[e(t).valueList.length-1],t)}},initial:function(n,e){return function(t){return t=n(t),e(t).max=void 0,t}}};e.exports=r},{}],21:[function(n,e,t){var r={add:function(n,e){var t;return function(r,u,i){return n&&n(r,u,i),t=Math.floor(e(r).valueList.length/2),e(r).valueList.length%2?e(r).median=e(r).valueList[t]:e(r).median=(e(r).valueList[t-1]+e(r).valueList[t])/2,r}},remove:function(n,e){var t;return function(r,u,i){return n&&n(r,u,i),t=Math.floor(e(r).valueList.length/2),0===e(r).valueList.length?(e(r).median=void 0,r):(1===e(r).valueList.length||e(r).valueList.length%2?e(r).median=e(r).valueList[t]:e(r).median=(e(r).valueList[t-1]+e(r).valueList[t])/2,r)}},initial:function(n,e){return function(t){return t=n(t),e(t).median=void 0,t}}};e.exports=r},{}],22:[function(n,e,t){var r={add:function(n,e){return function(t,r,u){return n&&n(t,r,u),e(t).min=e(t).valueList[0],t}},remove:function(n,e){return function(t,r,u){return n&&n(t,r,u),0===e(t).valueList.length?(e(t).min=void 0,t):(e(t).min=e(t).valueList[0],t)}},initial:function(n,e){return function(t){return t=n(t),e(t).min=void 0,t}}};e.exports=r},{}],23:[function(n,e,t){var r=(n("crossfilter"),{add:function(n,e,t){var r,u;return function(i,o,c){return e&&e(i,o,c),r=t(i).nest,n.forEach(function(n){u=r.filter(function(e){return e.key===n(o)})[0],u?r=u.values:(u=[],r.push({key:n(o),values:u}),r=u)}),r.push(o),i}},remove:function(n,e,t){var r;return function(u,i,o){return e&&e(u,i,o),r=t(u).nest,n.forEach(function(n){r=r.filter(function(e){return e.key===n(i)})[0].values}),r.splice(r.indexOf(i),1),u}},initial:function(n,e){return function(t){return t=n(t),e(t).nest=[],t}}});e.exports=r},{crossfilter:7}],24:[function(n,e,t){var r=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1}};e.exports=r},{}],25:[function(n,e,t){function r(n){return function(e,t,r){e.post=function(){var u=function(){return u.all()};u.all=function(){return e.all()};var i=n.postprocessors;return Object.keys(i).forEach(function(n){u[n]=function(){var e=u.all,o=[].slice.call(arguments);return u.all=function(){return i[n](e,r,t).apply(null,o)},u}}),u}}}e.exports=r},{}],26:[function(n,e,t){e.exports=function(e){e.postprocessors={},e.registerPostProcessor=function(n,t){e.postprocessors[n]=t},e.registerPostProcessor("cap",n("./cap")),e.registerPostProcessor("sortBy",n("./sortBy"))}},{"./cap":13,"./sortBy":28}],27:[function(n,e,t){function r(){function n(n){if(t={reduceAdd:function(n){return n},reduceRemove:function(n){return n},reduceInitial:function(){return{}}},u.build(e,t),e.groupAll)if(n.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var r,i,o,a,s,l=f.bisect.by(function(n){return n.key}).left;n.reduce(function(n,u,c){for(o=e.groupAll(u),a=o.length,i=0;a>i;i++)s=o[i],r=l(n,s,0,n.length),n[r]&&n[r].key===s||n.splice(r,0,{key:s,value:t.reduceInitial()}),t.reduceAdd(n[r].value,u,c);return n},function(n,u,c){for(o=e.groupAll(u),a=o.length,i=0;a>i;i++)r=l(n,o[i],0,n.length),t.reduceRemove(n[r].value,u,c);return n},function(){return[]}),n.all||(n.all=function(){return this.value()})}else n.reduce(t.reduceAdd,t.reduceRemove,t.reduceInitial);return c(n,e,t),n}var e=o(),t={};return i.build(n,e),n}var u=n("./build.js"),i=n("./accessors.js"),o=n("./parameters.js"),c=n("./postprocess"),f=n("crossfilter");n("./postprocessors")(r),c=c(r),e.exports=r},{"./accessors.js":8,"./build.js":12,"./parameters.js":24,"./postprocess":25,"./postprocessors":26,crossfilter:7}],28:[function(n,e,t){function r(n,e){return e>n?-1:n>e?1:n>=e?0:NaN}var u=function(n){if("function"==typeof n)return n;if(~n.indexOf(".")){var e=n.split(".");return function(n){return e.reduce(function(n,e){return n[e]},n)}}return function(e){return e[n]}},i=function(n,e){return function(t,r){return e(n(t),n(r))}};({}).toString;e.exports=function(n){return function(e,t){return 1===arguments.length&&(t=r),n().sort(i(u(e),t))}}},{}],29:[function(n,e,t){var r={add:function(n,e){return function(t,r,u){if(n&&n(t,r,u),e(t).count>0){e(t).std=0;var i=e(t).sumOfSq-e(t).sum*e(t).sum/e(t).count;i>0&&(e(t).std=Math.sqrt(i/(e(t).count-1)))}else e(t).std=0;return t}},remove:function(n,e){return function(t,r,u){if(n&&n(t,r,u),e(t).count>0){e(t).std=0;var i=e(t).sumOfSq-e(t).sum*e(t).sum/e(t).count;i>0&&(e(t).std=Math.sqrt(i/(e(t).count-1)))}else e(t).std=0;return t}},initial:function(n,e){return function(t){return t=n(t),e(t).std=0,t}}};e.exports=r},{}],30:[function(n,e,t){var r={add:function(n,e,t){return function(r,u,i){return e&&e(r,u,i),t(r).sumOfSq=t(r).sumOfSq+n(u)*n(u),r}},remove:function(n,e,t){return function(r,u,i){return e&&e(r,u,i),t(r).sumOfSq=t(r).sumOfSq-n(u)*n(u),r}},initial:function(n,e){return function(t){return t=n(t),e(t).sumOfSq=0,t}}};e.exports=r},{}],31:[function(n,e,t){var r={add:function(n,e,t){return function(r,u,i){return e&&e(r,u,i),t(r).sum=t(r).sum+n(u),r}},remove:function(n,e,t){return function(r,u,i){return e&&e(r,u,i),t(r).sum=t(r).sum-n(u),r}},initial:function(n,e){return function(t){return t=n(t),e(t).sum=0,t}}};e.exports=r},{}],32:[function(n,e,t){var r=n("crossfilter"),u={add:function(n,e,t){var r,u;return function(i,o,c){return e&&e(i,o,c),r=t(i).bisect(t(i).values,n(o),0,t(i).values.length),u=t(i).values[r],u&&u[0]===n(o)?u[1]++:t(i).values.splice(r,0,[n(o),1]),i}},remove:function(n,e,t){var r;return function(u,i,o){return e&&e(u,i,o),r=t(u).bisect(t(u).values,n(i),0,t(u).values.length),t(u).values[r][1]--,u}},initial:function(n,e){return function(t){return t=n(t),e(t).values=[],e(t).bisect=r.bisect.by(function(n){return n[0]}).left,t}}};e.exports=u},{crossfilter:7}],33:[function(n,e,t){var r=n("crossfilter"),u={add:function(n,e,t){var u,i=r.bisect.by(function(n){return n}).left;return function(r,o,c){return e&&e(r,o,c),u=i(t(r).valueList,n(o),0,t(r).valueList.length),t(r).valueList.splice(u,0,n(o)),r}},remove:function(n,e,t){var u,i=r.bisect.by(function(n){return n}).left;return function(r,o,c){return e&&e(r,o,c),u=i(t(r).valueList,n(o),0,t(r).valueList.length),t(r).valueList.splice(u,1),r}},initial:function(n,e){return function(t){return t=n(t),e(t).valueList=[],t}}};e.exports=u},{crossfilter:7}],34:[function(n,e,t){"use strict";function r(n){var e=u(n).reverse();return function(n){return e.reduce(function(n,e){return e(n)},n)}}function u(n){var e=x.isObject(n)?i(n):n;if(x.isString(n))return function(e){return e[n]};if(x.isArray(n)){var t=x.map(n,u);return function(n){return t.map(function(e){return e(n)})}}if(e.key){if(k[e.key])return[k[e.key],u(e.value)];console.error("Could not find aggregration method",e)}return[]}function i(n){for(var e in n)if(n.hasOwnProperty(e))return{key:e,value:n[e]}}function o(n){var e=[],t=n.indexOf("("),r=n.indexOf(")"),u=t>-1?n.substring(0,t):n;return k[u]?(t>-1&&r>-1&&r>t&&(e=n.substring(t+1,r).split(",")),{aggregator:k[u],params:e}):!1}function c(n){return n.reduce(function(n,e){return n+e})}function f(n){return n.reduce(function(n,e){return n+e})/n.length}function a(n){return Math.max.apply(null,n)}function s(n){return Math.min.apply(null,n)}function l(n){return n.length}function p(n){return n[0]}function d(n){return n[n.length-1]}function v(n,e){return n[e]}function h(n,e){return n[n.length-e]}function m(n,e){return n[Math.round(n.length*(e/100))]}function y(n,e){return n.map(function(n){return n[e]})}function g(n,e){return x.isString(e)&&n.sort(function(n,t){return n[e]<t[e]?-1:n[e]>t[e]?1:0}),x.isNumber(e)&&n.sort(function(n,t){return n[e]-t[e]}),Array.prototype.slice.call(n).sort(b)}var x=n("./lodash"),b=n("javascript-natural-sort"),k={$sum:c,$avg:f,$max:a,$min:s,$count:l,$first:p,$last:d,$get:v,$nth:v,$nthLast:h,$nthPct:m,$map:y,$sort:g};e.exports={makeFunction:r,aggregators:k,parseAggregatorParams:o}},{"./lodash":41,"javascript-natural-sort":4}],35:[function(n,e,t){"use strict";var r=n("q"),u=n("./lodash");e.exports=function(n){return function(e){function t(e){var t=[];e.removeListeners&&(t=u.map(e.removeListeners,function(n){
return r.resolve(n())}));var i=e.complex?JSON.stringify(e.key):e.key;return delete n.filters[i],e.dimension&&t.push(r.resolve(e.dimension.dispose())),r.all(t)}return e&&(e=u.isArray(e)?e:[e]),e?r.all(u.map(e,function(e){u.isObject(e)&&(e=e.key);var r=u.remove(n.columns,function(n){return u.isArray(e)?!u.xor(n.key,e).length:n.key===e?!n.dynamicReference:void 0})[0];r&&t(r)})).then(function(){return n}):r.all(u.map(n.columns,t)).then(function(){return n.columns=[],n})}}},{"./lodash":41,q:5}],36:[function(n,e,t){"use strict";var r=n("q"),u=n("./lodash");e.exports=function(e){function t(n){return u.isUndefined(n)&&(n=!0),u.isArray(n)||(n=[n]),r.all(u.map(n,c)).then(function(n){return e})}function i(n){return u.find(e.columns,function(e){return u.isArray(n)?!u.xor(e.key,n).length:e.key===n})}function o(n){return u.isNumber(n)?"number":u.isBoolean(n)?"bool":u.isArray(n)?"array":u.isObject(n)?"object":"string"}function c(n){var t=u.isObject(n)?n:{key:n},c=i(t.key);return c?(c=c,c.temporary=!1,c.dynamicReference&&(c.dynamicReference=!1),c.promise.then(function(){return e})):(e.columns.push(t),t.promise=r["try"](function(){return r.resolve(e.cf.all())}).then(function(n){var e;if(u.isArray(t.key)){if(t.complex=!0,e=u.values(u.pick(n[0],t.key)),e.length!==t.key.length)throw new Error("Column key does not exist in data!",t.key)}else e=n[0][t.key];if(!t.complex&&t.key!==!0&&"undefined"==typeof e)throw new Error("Column key does not exist in data!",t.key);return t.type=t.key===!0?"all":t.complex?"complex":t.array?"array":o(e),f.make(t.key,t.type)}).then(function(n){function i(n){return t.key===!0?r.resolve():r.resolve(t.dimension.bottom(1/0)).then(function(n){var e=f.makeAccessor(t.key);"complex"===t.type?t.values=u.uniq(u.flatten(u.map(n,e))):"array"===t.type?t.values=u.uniq(u.flatten(u.map(n,e))):t.values=u.uniq(u.map(n,e))})}t.dimension=n,t.filterCount=0;var o=e.onDataChange(i);return t.removeListeners=[o],i()}),t.promise.then(function(){return e}))}var f=n("./dimension")(e),a=t;return a.find=i,a}},{"./dimension":38,"./lodash":41,q:5}],37:[function(n,e,t){"use strict";var r=n("q"),u=n("crossfilter2"),i=n("./lodash");e.exports=function(n){function e(n){return i.isArray(n)?r.resolve(u(n)):n&&"function"==typeof n.dimension?r.resolve(n):r.reject(new Error("No Crossfilter data or instance found!"))}function t(e){return n.options.generatedColumns?i.map(e,function(e,t){return i.forEach(n.options.generatedColumns,function(n,t){e[t]=n(e)}),e}):e}function o(e){return e=t(e),r["try"](function(){return r.resolve(n.cf.add(e))}).then(function(){return r.serial(i.map(n.dataListeners,function(n){return function(){return n(!0)}}))}).then(function(){return n})}function c(){return r["try"](function(){return r.resolve(n.cf.remove())}).then(function(){return n})}return{build:e,generateColumns:t,add:o,remove:c}}},{"./lodash":41,crossfilter2:3,q:5}],38:[function(n,e,t){"use strict";var r=n("q"),u=n("./lodash");e.exports=function(n){function e(e,u){var i=t(e);return r.resolve(n.cf.dimension(i,"array"==u))}function t(n){var e;if(u.isArray(n)){var t=u.map(n,function(n){return"d['"+n+"']"});e=new Function("d","return "+JSON.stringify(t).replace(/\"/g,""))}else e=n===!0?function(n,e){return e}:function(e){return e[n]};return e}return{make:e,makeAccessor:t}}},{"./lodash":41,q:5}],39:[function(n,e,t){"use strict";function r(n,e){return n[e]}function u(n,e){e=e(n);for(var t=0;t<e.length;t++)if(!e[t])return!1;return!0}function i(n,e){e=e(n);for(var t=0;t<e.length;t++)if(e[t])return!0;return!1}function o(n,e){e=e(n);for(var t=0;t<e.length;t++)if(e[t])return!1;return!0}function c(n,e){return n===e()}function f(n,e){return n>e()}function a(n,e){return n>=e()}function s(n,e){return n<e()}function l(n,e){return n<=e()}function p(n,e){return n!==e()}function d(n,e){return typeof n===e()}function v(n,e){return n.indexOf(e())>-1}function h(n,e){return-1===n.indexOf(e())}function m(n,e){return e().indexOf(n)>-1}function y(n,e){return-1===e().indexOf(n)}function g(n,e){return n.length===e()}e.exports={$field:r,$and:u,$or:i,$not:o,$eq:c,$gt:f,$gte:a,$lt:s,$lte:l,$ne:p,$type:d,$in:v,$nin:h,$contains:m,$excludes:y,$size:g}},{}],40:[function(n,e,t){"use strict";var r=n("q"),u=n("./lodash"),i=n("./expressions"),o=n("./aggregation");e.exports=function(n){function e(e,t,i,o){var a=n.column.find(e);return r["try"](function(){return a?a:n.column({key:e,temporary:!0}).then(function(){return n.column.find(e)})}).then(function(e){var r=u.clone(n.filters,!0),a=e.complex?JSON.stringify(e.key):e.key;return r[a]=c(t,i,o),f(r)})}function t(){return f({})}function c(n,e,t){return u.isUndefined(n)?!1:u.isFunction(n)?{value:n,"function":n,replace:!0,type:"function"}:u.isObject(n)?{value:n,"function":p(n),replace:!0,type:"function"}:u.isArray(n)?{value:n,replace:e||t,type:e?"range":"inclusive"}:{value:n,replace:t,type:"exact"}}function f(e){var t=u.map(e,function(t,i){var o=n.filters[i];if(t.replace&&o&&u.isEqual(t,o))return r.resolve();var c;return c="["===i.charAt(0)?n.column.find(JSON.parse(i)):n.column.find(i),t&&o&&!t.replace&&(e[i]=t=a(t,o)),t?"exact"===t.type?r.resolve(c.dimension.filterExact(t.value)):"range"===t.type?r.resolve(c.dimension.filterRange(t.value)):"inclusive"===t.type?r.resolve(c.dimension.filterFunction(function(n){return t.value.indexOf(n)>-1})):"function"===t.type?r.resolve(c.dimension.filterFunction(t["function"])):r.resolve(c.dimension.filterAll()):r.resolve(c.dimension.filterAll())});return r.all(t).then(function(){n.filters=e;var t=[];return u.forEach(n.filters,function(e,r){e||(t.push({key:r,val:e}),delete n.filters[r])}),r.all(u.map(t,function(e){var t=n.column.find("["===e.key.charAt(0)?JSON.parse(e.key):e.key);return t.temporary&&!t.dynamicReference?n.clear(t.key):void 0}))}).then(function(){return n})}function a(n,e){if("exact"===n.type&&"inclusive"===e.type)n.value=u.xor([n.value],e.value);else if("inclusive"===n.type&&"exact"===e.type)n.value=u.xor(n.value,[e.value]);else if("inclusive"===n.type&&"inclusive"===e.type)n.value=u.xor(n.value,e.value);else if("exact"===n.type&&"exact"===e.type){if(n.value===e.value)return!1;n.value=[n.value,e.value]}return n.value.length?1===n.value.length?(n.type="exact",n.value=n.value[0]):n.type="inclusive":n=!1,n}function s(n){function e(n){u.forEach(n,function(n,r){var i=l(n,r);i&&t.push(i),u.isString(n)&&(i=l(null,n),i&&t.push(i)),u.isObject(n)&&e(n)})}var t=[];return e(n.filter),t}function l(n,e){return"$data"===e?!0:e&&"$column"===e?u.isString(n)?n:(console.warn('The value for filter "$column" must be a valid column key',n),!1):void 0}function p(e,t){var r;if(u.isString(e)){var c=l(null,e);if(c){var f=n.cf.all();return function(n){return f}}}return u.isString(e)||u.isNumber(e)||u.isBoolean(e)?function(n){return"undefined"==typeof n?e:i.$eq(n,function(){return e})}:u.isArray(e)?(r=u.map(e,function(n){return p(n,t)}),function(n){return r.map(function(e){return e(n)})}):u.isObject(e)?(r=u.map(e,function(e,r){var u=p(e,t),c=l(e,r);if(c){var f=n.column.find(c),a=f.values;return function(n){return a}}if(i[r])return function(n){return i[r](n,u)};var s=o.parseAggregatorParams(r);return s?(t=!0,u=p(e,t),function(n){return s.aggregator.apply(null,[u()].concat(s.params))}):function(n){return n=n[r],u(n,u)}}),t?1===r.length?function(n){return r[0](n)}:function(n){return u.map(r,function(e){return e(n)})}:function(n){return i.$and(n,function(n){return u.map(r,function(e){return e(n)})})}):(console.log("no expression found for ",e),!1)}return{filter:e,filterAll:t,applyFilters:f,makeFunction:p,scanForDynamicFilters:s}}},{"./aggregation":34,"./expressions":39,"./lodash":41,q:5}],41:[function(n,e,t){"use strict";function r(n){n=n||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(n[t]=arguments[e][t]);return n}function u(n,e){return n.find(e)}function i(n,e){return n.filter(function(t,r){var u=e(t);return u?(n.splice(r,1),!0):void 0})}function o(n){return Array.isArray(n)}function c(n){return"object"==typeof n&&!o(n)}function f(n){return"boolean"==typeof n}function a(n){return"string"==typeof n}function s(n){return"number"==typeof n}function l(n){return"function"==typeof n}function p(n,e){return e.replace("[",".").replace("]","").split(".").reduce(function(n,e){return n[e]},n)}function d(n,e){var t,r;if(l(e)){if(c(n)){t=[];for(r in n)n.hasOwnProperty(r)&&t.push(e(n[r],r,n));return t}return n.map(e)}if(c(n)){t=[];for(r in n)n.hasOwnProperty(r)&&t.push(n[r]);return t}return n.map(function(n,t){return n[e]})}function v(n,e){return l(e)?n.sort(function(n,e){return n.value>e.value?1:n.value<e.value?-1:0}):void 0}function h(n,e){if(!c(n))return o(n)?n.forEach(e):void 0;for(var t in n)n.hasOwnProperty(t)&&e(n[t],t,n)}function m(n){return"undefined"==typeof n}function y(n,e){var t={};return h(e,function(e){"undefined"!=typeof n[e]&&(t[e]=n[e])}),t}function g(n,e){var t=[];return h(n,function(n){return-1===e.indexOf(n)?t.push(n):void 0}),h(e,function(e){return-1===n.indexOf(e)?t.push(e):void 0}),t}function x(n){return JSON.parse(JSON.stringify(n,function(n,e){return"function"==typeof e?e.toString():e}))}function b(n,e){if("object"==typeof n&&null!==n&&"object"==typeof e&&null!==e){if(Object.keys(n).length!=Object.keys(e).length)return!1;for(var t in n){if(!e.hasOwnProperty(t))return!1;if(!b(n[t],e[t]))return!1}return!0}return n===e}function k(n,e){var t=n.length,r=e.length;return t>r?n.splice(r,t-r):r>t&&n.push.apply(n,new Array(r-t)),h(n,function(t,r){n[r]=e[r]}),n}function w(n){var e=new Set;return n.filter(function(n){var t=!1;return e.has(n)||(e.add(n),t=!0),t})}function A(n){for(var e=[],t=0;t<n.length;++t)for(var r=n[t],u=0;u<r.length;++u)e.push(r[u]);return e}function j(n){for(var e=1;e<n.length;e++){for(var t=n[e],r=e;n[r-1]>t;)n[r]=n[r-1],--r;n[r]=t}return n}function O(n){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(n[t]);return e}n("javascript-natural-sort");e.exports={assign:r,find:u,remove:i,isArray:o,isObject:c,isBoolean:f,isString:a,isNumber:s,isFunction:l,get:p,map:d,sortBy:v,forEach:h,isUndefined:m,pick:y,xor:g,clone:x,isEqual:b,replaceArray:k,uniq:w,flatten:A,sort:j,values:O}},{"javascript-natural-sort":4}],42:[function(n,e,t){"use strict";function r(n){var e,t=new Error;return i.forEach(n,function(n,r){var i,c=n.success||n,f=n.fail,a=n.notify;if(e)i=e.then(function(n){if(!c)return n;var e=c(n);if(!o(e))throw t.message="Task "+r+" did not return a promise.",t;return e},function(n){if(!f)return u.reject(n);var e=f(n);if(!o(e))throw t.message="Fail for task "+r+" did not return a promise.",t;return e},a);else if(i=c(),!o(i))throw t.message="Task "+r+" did not return a promise.",t;e=i}),e||u.when()}var u=n("q"),i=n("./lodash");u.serial=r;var o=function(n){return n&&i.isFunction(n.then)}},{"./lodash":41,q:5}],43:[function(n,e,t){"use strict";var r=n("q"),u=n("./lodash");e.exports=function(e){var t=n("./reductiofy")(e),i=n("./filters")(e);return function(n){"undefined"==typeof n&&(n={}),"undefined"==typeof n.select&&(n.select={$count:!0}),n.groupBy=n.groupBy||!0;var o,c=e.column.find(n.groupBy);return r["try"](function(){return c?c:e.column({key:n.groupBy,type:u.isUndefined(n.type)?null:n.type,array:!!n.array}).then(function(){return e.column.find(n.groupBy)})}).then(function(n){return c=n,r.resolve(c.dimension.group())}).then(function(e){return o=e,i.scanForDynamicFilters(n)}).then(function(n){return n.length?r.all(u.map(n,function(n){return e.column({key:n,dynamicReference:o})})).then(function(){return!0}):!1}).then(function(u){function i(e,u){return t(n).then(function(n){return e.reducer=n,e.reducer(e.group),r.resolve(e.group.all())}).then(function(n){e.data=n})}var f,a={universe:e,crossfilter:e.cf,dimension:c.dimension,group:o,reducer:null};return u&&(f=e.onDataChange(function(n){return i(a,n)}),c.removeListeners.push(f)),i(a).then(function(){return a})})}}},{"./filters":40,"./lodash":41,"./reductiofy":45,q:5}],44:[function(n,e,t){"use strict";function r(n,e){return n.count(!0)}function u(n,e){return n.sum(e)}function i(n,e){return n.avg(e)}function o(n,e){return n.min(e)}function c(n,e){return n.max(e)}function f(n,e){return n.median(e)}function a(n,e){return n.sumOfSq(e)}function s(n,e){return n.std(e)}function l(n,e){return n.valueList(e)}function p(n,e){return n.dataList(!0)}n("./lodash");e.exports={shorthandLabels:{$count:"count",$sum:"sum",$avg:"avg",$min:"min",$max:"max",$med:"med",$sumSq:"sumSq",$std:"std"},aggregators:{$count:r,$sum:u,$avg:i,$min:o,$max:c,$med:f,$sumSq:a,$std:s,$valueList:l,$dataList:p}}},{"./lodash":41}],45:[function(n,e,t){"use strict";var r=n("reductio"),u=n("./lodash"),i=n("./reductioAggregators"),o=(n("./expressions"),n("./aggregation"));e.exports=function(e){var t=n("./filters")(e);return function(n){function e(n,t){var r=u.sortBy(u.map(t,function(n,e){return{key:e,value:n}}),function(n){return i.aggregators[n.key]?0:1});return u.forEach(r,function(t){if(i.aggregators[t.key]){var r=c(t.value);return void(n=i.aggregators[t.key](n,r))}return u.isObject(t.value)?void(n=e(n.value(t.key),t.value)):void console.error("Nested selects must be an object",t.key)})}function c(n){return"string"==typeof n||"number"==typeof n?n+"":u.isObject(n)?o.makeFunction(n):void 0}var f=r();n.groupBy;if(e(f,n.select),n.filter){var a=t.makeFunction(n.filter);a&&f.filter(a)}return Promise.resolve(f)}}},{"./aggregation":34,"./expressions":39,"./filters":40,"./lodash":41,"./reductioAggregators":44,reductio:27}],46:[function(n,e,t){"use strict";function r(e,t){function r(n){return i.dataListeners.push(n),function(){i.dataListeners.splice(i.dataListeners.indexOf(n),1)}}var i={options:u.assign({},t),columns:[],filters:{},dataListeners:[]},o=n("./crossfilter")(i);return e=o.generateColumns(e),o.build(e).then(function(e){return i.cf=e,u.assign(i,{add:o.add,remove:o.remove,column:n("./column")(i),query:n("./query")(i),filter:n("./filters")(i).filter,clear:n("./clear")(i),onDataChange:r})})}n("./q.serial");var u=(n("q"),n("./lodash"));e.exports=r},{"./clear":35,"./column":36,"./crossfilter":37,"./filters":40,"./lodash":41,"./q.serial":42,"./query":43,q:5}]},{},[46])(46)});